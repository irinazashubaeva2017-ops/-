<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TEQRA Finance</title>

<style>
*{box-sizing:border-box}
html,body{
margin:0;
padding:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background:#0e1116;
color:#e5e7eb;
}

/* контейнер */
.app{
max-width:430px;
margin:auto;
padding:28px 20px 40px;
min-height:100vh;
}

/* заголовок */
.title{
text-align:center;
font-size:16px;
letter-spacing:3px;
opacity:0.6;
margin-bottom:25px;
}

/* баланс */
.balance{
text-align:center;
font-size:44px;
font-weight:700;
margin-bottom:30px;
transition:0.3s;
}

.positive{color:#22c55e}
.negative{color:#ef4444}

/* карточки */
.stats{
display:flex;
gap:12px;
margin-bottom:25px;
}

.card{
flex:1;
padding:18px;
border-radius:20px;
background:#161b22;
border:1px solid #22262e;
font-size:13px;
}

.card strong{
display:block;
margin-bottom:6px;
}

/* переключатели */
.switch{
display:flex;
gap:10px;
margin-bottom:15px;
}

.switch button{
flex:1;
padding:14px;
border-radius:20px;
border:1px solid #2a2f38;
background:#161b22;
color:#9ca3af;
font-weight:500;
}

.active{
background:#1f2937 !important;
color:white !important;
border-color:#3b82f6 !important;
}

/* поля */
input{
width:100%;
padding:15px;
border-radius:20px;
border:1px solid #2a2f38;
background:#161b22;
color:white;
margin-bottom:14px;
font-size:15px;
outline:none;
}

input:focus{
border-color:#3b82f6;
}

/* кнопки */
button.main{
width:100%;
padding:16px;
border-radius:24px;
border:none;
background:#3b82f6;
color:white;
font-weight:600;
margin-bottom:15px;
transition:0.2s;
}

button.main:active{
transform:scale(0.97);
}

.history{
margin-top:25px;
}

.item{
display:flex;
justify-content:space-between;
align-items:center;
padding:16px 0;
border-bottom:1px solid #1f242c;
font-size:14px;
}

.itemInfo{
display:flex;
flex-direction:column;
}

.author{
font-size:11px;
opacity:0.5;
margin-top:3px;
}

.actions{
display:flex;
gap:10px;
font-size:12px;
opacity:0.6;
}

.actions span{
cursor:pointer;
}

.income{color:#22c55e}
.expense{color:#ef4444}
</style>
</head>
<body>

<div class="app" onclick="hideKeyboard(event)">

<div class="title">TEQRA FINANCE</div>

<div class="balance" id="totalBalance">0 грн</div>

<div class="stats">
<div class="card">
<strong>Іра</strong>
Доходи: <span id="iraIncome">0</span><br>
Витрати: <span id="iraExpense">0</span><br>
Баланс: <span id="iraBalance">0</span>
</div>

<div class="card">
<strong>Міша</strong>
Доходи: <span id="mishaIncome">0</span><br>
Витрати: <span id="mishaExpense">0</span><br>
Баланс: <span id="mishaBalance">0</span>
</div>
</div>

<div class="switch">
<button id="iraBtn" onclick="setUser('Іра')">Іра</button>
<button id="mishaBtn" onclick="setUser('Міша')">Міша</button>
</div>

<div class="switch">
<button id="incomeBtn" onclick="setType('income')">Дохід</button>
<button id="expenseBtn" onclick="setType('expense')">Витрата</button>
</div>

<input type="number" inputmode="decimal" id="amount" placeholder="Сума">
<input type="text" id="category" placeholder="Категорія">

<button class="main" onclick="add()">Додати</button>

<div class="history" id="list"></div>

</div>

<script>

let data=JSON.parse(localStorage.getItem("financeApp"))||[];
let currentUser="Іра";
let currentType="income";
let editIndex=null;

function hideKeyboard(e){
if(e.target.tagName!=="INPUT"){
document.activeElement.blur();
}
}

function setUser(name){
currentUser=name;
document.getElementById("iraBtn").classList.remove("active");
document.getElementById("mishaBtn").classList.remove("active");
document.getElementById(name==="Іра"?"iraBtn":"mishaBtn").classList.add("active");
}

function setType(type){
currentType=type;
document.getElementById("incomeBtn").classList.remove("active");
document.getElementById("expenseBtn").classList.remove("active");
document.getElementById(type==="income"?"incomeBtn":"expenseBtn").classList.add("active");
}

setUser("Іра");
setType("income");

function save(){
localStorage.setItem("financeApp",JSON.stringify(data));
}

function render(){
let iraIncome=0,iraExpense=0;
let mishaIncome=0,mishaExpense=0;
let list=document.getElementById("list");
list.innerHTML="";

data.forEach((item,index)=>{
if(item.author==="Іра"){
item.type==="income"?iraIncome+=item.amount:iraExpense+=item.amount;
}else{
item.type==="income"?mishaIncome+=item.amount:mishaExpense+=item.amount;
}

let div=document.createElement("div");
div.className="item";
div.innerHTML=`
<div class="itemInfo">
${item.category}
<div class="author">${item.author}</div>
</div>
<div>
<span class="${item.type}">
${item.type==="income"?"+":"-"} ${item.amount.toFixed(2)}
</span>
<div class="actions">
<span onclick="edit(${index})">Редагувати</span>
<span onclick="remove(${index})">Видалити</span>
</div>
</div>
`;
list.appendChild(div);
});

let iraBalance=iraIncome-iraExpense;
let mishaBalance=mishaIncome-mishaExpense;
let total=iraBalance+mishaBalance;

document.getElementById("iraIncome").innerText=iraIncome;
document.getElementById("iraExpense").innerText=iraExpense;
document.getElementById("iraBalance").innerText=iraBalance;

document.getElementById("mishaIncome").innerText=mishaIncome;
document.getElementById("mishaExpense").innerText=mishaExpense;
document.getElementById("mishaBalance").innerText=mishaBalance;

let totalEl=document.getElementById("totalBalance");
totalEl.innerText=total+" грн";
totalEl.className="balance "+(total>=0?"positive":"negative");
}

function add(){
let amount=parseFloat(document.getElementById("amount").value);
let category=document.getElementById("category").value;
if(!amount||!category)return;

if(editIndex!==null){
data[editIndex]={type:currentType,amount,category,author:currentUser};
editIndex=null;
}else{
data.unshift({type:currentType,amount,category,author:currentUser});
}

save();
render();
document.getElementById("amount").value="";
document.getElementById("category").value="";
}

function edit(index){
let item=data[index];
editIndex=index;
currentType=item.type;
currentUser=item.author;
setUser(item.author);
setType(item.type);
document.getElementById("amount").value=item.amount;
document.getElementById("category").value=item.category;
window.scrollTo({top:0,behavior:"smooth"});
}

function remove(index){
data.splice(index,1);
save();
render();
}

render();

</script>
</body>
</html>
