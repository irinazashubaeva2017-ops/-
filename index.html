<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TEQRA Finance Universe</title>

<style>
*{box-sizing:border-box}
html,body{
margin:0;
padding:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background:radial-gradient(circle at top,#1e293b,#0f172a 70%);
color:white;
overflow-x:hidden;
}

/* контейнер */
.app{
max-width:430px;
margin:auto;
min-height:100vh;
padding:28px 20px 40px;
}

/* заголовок */
.title{
text-align:center;
font-size:18px;
letter-spacing:3px;
font-weight:600;
margin-bottom:30px;
opacity:0.9;
}

/* баланс */
.balance{
text-align:center;
font-size:48px;
font-weight:700;
margin-bottom:25px;
transition:0.3s;
}

.positive{color:#22c55e}
.negative{color:#ef4444}

/* 3D карточки */
.userStats{
display:flex;
gap:12px;
margin-bottom:25px;
}

.userCard{
flex:1;
padding:18px;
border-radius:24px;
background:linear-gradient(145deg,#1e293b,#111827);
box-shadow:8px 8px 20px #0b1220,
-4px -4px 15px rgba(255,255,255,0.03);
font-size:12px;
}

.userCard strong{
font-size:14px;
display:block;
margin-bottom:6px;
}

/* переключатели */
.switch{
display:flex;
gap:10px;
margin-bottom:15px;
}

.switch button{
flex:1;
padding:14px;
border:none;
border-radius:25px;
font-weight:600;
background:#1e293b;
color:#94a3b8;
transition:0.25s;
}

.activeIncome{
background:#16a34a !important;
color:white !important;
box-shadow:0 0 15px rgba(22,163,74,0.5);
}

.activeExpense{
background:#dc2626 !important;
color:white !important;
box-shadow:0 0 15px rgba(220,38,38,0.5);
}

.users button.activeUser{
background:#2563eb;
color:white;
box-shadow:0 0 12px rgba(37,99,235,0.6);
}

input{
width:100%;
padding:16px;
border-radius:25px;
border:none;
background:#1e293b;
color:white;
margin-bottom:15px;
font-size:16px;
outline:none;
}

input::placeholder{
color:#64748b;
}

button.main{
width:100%;
padding:16px;
border-radius:28px;
border:none;
background:linear-gradient(90deg,#2563eb,#7c3aed);
color:white;
font-weight:600;
margin-bottom:15px;
transition:0.25s;
}

button.main:active{
transform:scale(0.96);
}

.history{
margin-top:20px;
}

.item{
display:flex;
justify-content:space-between;
padding:14px 0;
border-bottom:1px solid rgba(255,255,255,0.05);
font-size:14px;
animation:fade 0.3s ease;
}

@keyframes fade{
from{opacity:0;transform:translateY(10px)}
to{opacity:1;transform:translateY(0)}
}

.income{color:#22c55e}
.expense{color:#ef4444}

.author{
font-size:11px;
opacity:0.5;
}
</style>
</head>
<body>

<div class="app" onclick="hideKeyboard(event)">

<div class="title">TEQRA • FINANCE UNIVERSE</div>

<div class="balance" id="totalBalance">0 грн</div>

<div class="userStats">
<div class="userCard">
<strong>Іра</strong>
Доходи: <span id="iraIncome">0</span><br>
Витрати: <span id="iraExpense">0</span><br>
Баланс: <span id="iraBalance">0</span>
</div>

<div class="userCard">
<strong>Міша</strong>
Доходи: <span id="mishaIncome">0</span><br>
Витрати: <span id="mishaExpense">0</span><br>
Баланс: <span id="mishaBalance">0</span>
</div>
</div>

<div class="switch users">
<button id="iraBtn" onclick="setUser('Іра')">Іра</button>
<button id="mishaBtn" onclick="setUser('Міша')">Міша</button>
</div>

<div class="switch">
<button id="incomeBtn" onclick="setType('income')">Дохід</button>
<button id="expenseBtn" onclick="setType('expense')">Витрата</button>
</div>

<input type="number" inputmode="decimal" id="amount" placeholder="Сума">
<input type="text" id="category" placeholder="Категорія">

<button class="main" onclick="add()">Додати</button>

<div class="history" id="list"></div>

</div>

<script>
let data=JSON.parse(localStorage.getItem("financeApp"))||[];
let currentUser="Іра";
let currentType="income";

function hideKeyboard(e){
if(e.target.tagName!=="INPUT"){
document.activeElement.blur();
}
}

function setUser(name){
currentUser=name;
document.getElementById("iraBtn").classList.remove("activeUser");
document.getElementById("mishaBtn").classList.remove("activeUser");
document.getElementById(name==="Іра"?"iraBtn":"mishaBtn").classList.add("activeUser");
}

setUser("Іра");

function setType(type){
currentType=type;
document.getElementById("incomeBtn").classList.remove("activeIncome");
document.getElementById("expenseBtn").classList.remove("activeExpense");
document.getElementById(type==="income"?"incomeBtn":"expenseBtn")
.classList.add(type==="income"?"activeIncome":"activeExpense");
}

setType("income");

function save(){
localStorage.setItem("financeApp",JSON.stringify(data));
}

function render(){
let iraIncome=0, iraExpense=0;
let mishaIncome=0, mishaExpense=0;
let list=document.getElementById("list");
list.innerHTML="";

data.forEach(item=>{
if(item.author==="Іра"){
if(item.type==="income")iraIncome+=item.amount;
else iraExpense+=item.amount;
}else{
if(item.type==="income")mishaIncome+=item.amount;
else mishaExpense+=item.amount;
}

let div=document.createElement("div");
div.className="item";
div.innerHTML=`
<div>
${item.category}
<div class="author">${item.author}</div>
</div>
<div class="${item.type}">
${item.type==="income"?"+ ":"- "}${item.amount.toFixed(2)}
</div>
`;
list.appendChild(div);
});

let iraBalance=iraIncome-iraExpense;
let mishaBalance=mishaIncome-mishaExpense;
let total=iraBalance+mishaBalance;

document.getElementById("iraIncome").innerText=iraIncome;
document.getElementById("iraExpense").innerText=iraExpense;
document.getElementById("iraBalance").innerText=iraBalance;

document.getElementById("mishaIncome").innerText=mishaIncome;
document.getElementById("mishaExpense").innerText=mishaExpense;
document.getElementById("mishaBalance").innerText=mishaBalance;

let totalEl=document.getElementById("totalBalance");
totalEl.innerText=total+" грн";
totalEl.className="balance "+(total>=0?"positive":"negative");
}

function add(){
let amount=parseFloat(document.getElementById("amount").value);
let category=document.getElementById("category").value;
if(!amount||!category)return;

data.unshift({type:currentType,amount,category,author:currentUser});
save();
render();
document.getElementById("amount").value="";
document.getElementById("category").value="";
}

render();
</script>
</body>
</html>
