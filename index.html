<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Finance Duo Pro</title>

<style>
*{box-sizing:border-box}
html,body{
margin:0;
padding:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background:#0f172a;
}

.app{
max-width:430px;
margin:auto;
min-height:100vh;
padding:28px 20px;
background:linear-gradient(180deg,#ffffff,#f8fafc);
border-radius:35px;
}

.title{
text-align:center;
font-weight:600;
font-size:18px;
letter-spacing:2px;
margin-bottom:20px;
color:#334155;
}

.balance{
text-align:center;
font-size:44px;
font-weight:700;
margin-bottom:25px;
}

.positive{color:#16a34a}
.negative{color:#dc2626}

.sectionTitle{
font-size:13px;
font-weight:600;
margin:20px 0 10px;
color:#64748b;
}

.userStats{
display:flex;
gap:10px;
margin-bottom:15px;
}

.userCard{
flex:1;
padding:14px;
border-radius:18px;
font-size:12px;
font-weight:600;
background:#f1f5f9;
}

.ira{border-left:4px solid #16a34a}
.misha{border-left:4px solid #2563eb}

.users{
display:flex;
gap:10px;
margin-bottom:15px;
}

.users button{
flex:1;
padding:10px;
border:none;
border-radius:18px;
background:#e2e8f0;
font-weight:600;
}

.activeUser{
background:#111827 !important;
color:white;
}

.switch{
display:flex;
gap:10px;
margin-bottom:15px;
}

.switch button{
flex:1;
padding:12px;
border:none;
border-radius:20px;
font-weight:600;
}

.incomeBtn{background:#dcfce7;color:#166534}
.expenseBtn{background:#fee2e2;color:#991b1b}

input{
width:100%;
padding:14px;
border-radius:20px;
border:none;
background:#eef2f7;
margin-bottom:12px;
font-size:15px;
outline:none;
}

button.main{
width:100%;
padding:15px;
border-radius:25px;
border:none;
background:#111827;
color:white;
font-weight:600;
margin-bottom:12px;
}

button.secondary{
background:#94a3b8;
}

.history{
margin-top:20px;
}

.item{
display:flex;
justify-content:space-between;
padding:14px 0;
border-bottom:1px solid #e2e8f0;
font-size:14px;
}

.income{color:#16a34a;font-weight:600}
.expense{color:#dc2626;font-weight:600}

.author{
font-size:11px;
opacity:0.6;
}
</style>
</head>
<body>

<div class="app">

<div class="title">FINANCE DUO PRO</div>

<div class="balance" id="totalBalance">0 грн</div>

<div class="sectionTitle">Баланс кожного</div>

<div class="userStats">
<div class="userCard ira">
Іра<br>
<span id="iraIncome">0</span> / <span id="iraExpense">0</span><br>
Баланс: <span id="iraBalance">0</span>
</div>

<div class="userCard misha">
Міша<br>
<span id="mishaIncome">0</span> / <span id="mishaExpense">0</span><br>
Баланс: <span id="mishaBalance">0</span>
</div>
</div>

<div class="sectionTitle">Додати операцію</div>

<div class="users">
<button id="iraBtn" onclick="setUser('Іра')">Іра</button>
<button id="mishaBtn" onclick="setUser('Міша')">Міша</button>
</div>

<div class="switch">
<button class="incomeBtn" onclick="setType('income')">Дохід</button>
<button class="expenseBtn" onclick="setType('expense')">Витрата</button>
</div>

<input type="number" id="amount" placeholder="Сума">
<input type="text" id="category" placeholder="Категорія">

<button class="main" onclick="add()">Додати</button>
<button class="main secondary" onclick="exportData()">Експорт</button>
<button class="main secondary" onclick="document.getElementById('importFile').click()">Імпорт</button>

<input type="file" id="importFile" style="display:none" accept=".json" onchange="importData(event)">

<div class="history" id="list"></div>

</div>

<script>

let data=JSON.parse(localStorage.getItem("financeApp"))||[];
let currentUser=localStorage.getItem("financeUser")||"Іра";
let currentType="income";

function setUser(name){
currentUser=name;
localStorage.setItem("financeUser",name);
document.getElementById("iraBtn").classList.remove("activeUser");
document.getElementById("mishaBtn").classList.remove("activeUser");
if(name==="Іра")document.getElementById("iraBtn").classList.add("activeUser");
else document.getElementById("mishaBtn").classList.add("activeUser");
}

setUser(currentUser);

function setType(type){
currentType=type;
}

function save(){
localStorage.setItem("financeApp",JSON.stringify(data));
}

function render(){

let iraIncome=0, iraExpense=0;
let mishaIncome=0, mishaExpense=0;

let list=document.getElementById("list");
list.innerHTML="";

data.forEach(item=>{
if(item.author==="Іра"){
if(item.type==="income")iraIncome+=item.amount;
else iraExpense+=item.amount;
}else{
if(item.type==="income")mishaIncome+=item.amount;
else mishaExpense+=item.amount;
}

let div=document.createElement("div");
div.className="item";
div.innerHTML=`
<div>
${item.category}
<div class="author">${item.author}</div>
</div>
<div class="${item.type}">
${item.type==="income"?"+ ":"- "}${item.amount.toFixed(2)}
</div>
`;
list.appendChild(div);
});

let iraBalance=iraIncome-iraExpense;
let mishaBalance=mishaIncome-mishaExpense;
let totalBalance=iraBalance+mishaBalance;

document.getElementById("iraIncome").innerText=iraIncome.toFixed(0);
document.getElementById("iraExpense").innerText=iraExpense.toFixed(0);
document.getElementById("iraBalance").innerText=iraBalance.toFixed(0);

document.getElementById("mishaIncome").innerText=mishaIncome.toFixed(0);
document.getElementById("mishaExpense").innerText=mishaExpense.toFixed(0);
document.getElementById("mishaBalance").innerText=mishaBalance.toFixed(0);

let totalEl=document.getElementById("totalBalance");
totalEl.innerText=totalBalance.toFixed(0)+" грн";
totalEl.className="balance "+(totalBalance>=0?"positive":"negative");
}

function add(){
let amount=parseFloat(document.getElementById("amount").value);
let category=document.getElementById("category").value;
if(!amount||!category)return;

data.unshift({type:currentType,amount,category,author:currentUser});
save();
render();

document.getElementById("amount").value="";
document.getElementById("category").value="";
}

function exportData(){
const blob=new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
const url=URL.createObjectURL(blob);
const a=document.createElement("a");
a.href=url;
a.download="finance-duo-pro.json";
a.click();
URL.revokeObjectURL(url);
}

function importData(event){
const file=event.target.files[0];
if(!file)return;
const reader=new FileReader();
reader.onload=function(e){
try{
const imported=JSON.parse(e.target.result);
if(!Array.isArray(imported))return;
data=[...imported,...data];
save();
render();
}catch{}
};
reader.readAsText(file);
}

render();

</script>
</body>
</html>
