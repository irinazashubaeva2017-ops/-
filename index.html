<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Budget X</title>

<style>
*{box-sizing:border-box}
html,body{
margin:0;
padding:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background:#0a0f1f;
}
.app{
max-width:430px;
margin:auto;
min-height:100vh;
padding:25px 20px;
background:linear-gradient(145deg,#ffffff,#f1f5f9);
border-radius:35px;
}
.title{
text-align:center;
font-weight:600;
font-size:20px;
margin-bottom:25px;
}
.balance{
text-align:center;
font-size:42px;
font-weight:700;
margin-bottom:25px;
}
.positive{color:#16a34a}
.negative{color:#dc2626}
.summary{
display:flex;
justify-content:space-between;
margin-bottom:25px;
font-weight:600;
}
.summary div{
width:48%;
padding:14px;
border-radius:20px;
text-align:center;
font-size:14px;
}
.incomeBox{
background:rgba(22,163,74,0.08);
color:#16a34a;
}
.expenseBox{
background:rgba(220,38,38,0.08);
color:#dc2626;
}
.row{display:flex;gap:10px}
select,input{
width:100%;
padding:14px;
border-radius:20px;
border:none;
background:#f1f5f9;
font-size:15px;
outline:none;
margin-bottom:10px;
}
button{
width:100%;
padding:15px;
border-radius:20px;
border:none;
background:#111827;
color:white;
font-size:15px;
font-weight:600;
margin-top:8px;
}
.secondary{
background:#64748b;
}
.history{
margin-top:20px;
}
.item{
display:flex;
justify-content:space-between;
padding:14px 0;
border-bottom:1px solid #e5e7eb;
font-size:15px;
}
.income{color:#16a34a;font-weight:600}
.expense{color:#dc2626;font-weight:600}
.delete{
margin-left:10px;
color:#999;
cursor:pointer;
}
</style>
</head>
<body>

<div class="app">

<div class="title">BUDGET X</div>

<div class="balance" id="balance">0 –≥—Ä–Ω</div>

<div class="summary">
<div class="incomeBox">–î–æ—Ö–æ–¥–∏<br><span id="incomeTotal">0</span> –≥—Ä–Ω</div>
<div class="expenseBox">–í–∏—Ç—Ä–∞—Ç–∏<br><span id="expenseTotal">0</span> –≥—Ä–Ω</div>
</div>

<div class="row">
<select id="type">
<option value="income">‚ûï</option>
<option value="expense">‚ûñ</option>
</select>
<input type="number" id="amount" placeholder="–°—É–º–∞">
</div>

<input type="text" id="category" placeholder="–ö–∞—Ç–µ–≥–æ—Ä—ñ—è">

<button onclick="add()">–î–æ–¥–∞—Ç–∏</button>
<button class="secondary" onclick="exportData()">üì§ –ï–∫—Å–ø–æ—Ä—Ç</button>
<button class="secondary" onclick="document.getElementById('importFile').click()">üì• –Ü–º–ø–æ—Ä—Ç</button>

<input type="file" id="importFile" style="display:none" accept=".json" onchange="importData(event)">

<div class="history" id="list"></div>

</div>

<script>

let PASSWORD = "1234"; // –ú–æ–∂–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
let data = JSON.parse(localStorage.getItem("financeApp")) || [];

function save(){
localStorage.setItem("financeApp",JSON.stringify(data));
}

function render(){
let incomeTotal=0;
let expenseTotal=0;
let list=document.getElementById("list");
list.innerHTML="";

data.forEach((item,index)=>{
if(item.type==="income") incomeTotal+=item.amount;
else expenseTotal+=item.amount;

let div=document.createElement("div");
div.className="item";
div.innerHTML=`
<span>${item.category}</span>
<span class="${item.type}">
${item.type==="income"?"+ ":"- "}${item.amount.toFixed(2)} –≥—Ä–Ω
<span class="delete" onclick="remove(${index})">‚úï</span>
</span>
`;
list.appendChild(div);
});

let balance=incomeTotal-expenseTotal;

document.getElementById("incomeTotal").innerText=incomeTotal.toFixed(2);
document.getElementById("expenseTotal").innerText=expenseTotal.toFixed(2);

let balanceEl=document.getElementById("balance");
balanceEl.innerText=balance.toFixed(2)+" –≥—Ä–Ω";
balanceEl.className="balance "+(balance>=0?"positive":"negative");
}

function add(){
let type=document.getElementById("type").value;
let amount=parseFloat(document.getElementById("amount").value);
let category=document.getElementById("category").value;

if(!amount||!category)return;

data.unshift({type,amount,category,date:new Date()});
save();
render();

document.getElementById("amount").value="";
document.getElementById("category").value="";
}

function remove(index){
data.splice(index,1);
save();
render();
}

function exportData(){
if(data.length===0){alert("–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö");return;}

let protectedData={
password:PASSWORD,
payload:data
};

const blob=new Blob([JSON.stringify(protectedData,null,2)],{type:"application/json"});
const url=URL.createObjectURL(blob);
const a=document.createElement("a");
a.href=url;
a.download="budget-backup.json";
a.click();
URL.revokeObjectURL(url);
}

function importData(event){
const file=event.target.files[0];
if(!file)return;

const reader=new FileReader();
reader.onload=function(e){
try{
const imported=JSON.parse(e.target.result);

if(imported.password!==PASSWORD){
alert("–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å!");
return;
}

if(!Array.isArray(imported.payload)){
alert("–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–∞–π–ª");
return;
}

// –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
data=[...imported.payload,...data];

save();
render();
alert("–î–∞–Ω—ñ —É—Å–ø—ñ—à–Ω–æ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ!");
}catch{
alert("–ü–æ–º–∏–ª–∫–∞ —ñ–º–ø–æ—Ä—Ç—É");
}
};
reader.readAsText(file);
}

render();

</script>
</body>
</html>
