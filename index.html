<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Finance X</title>

<style>
*{box-sizing:border-box}
html,body{
margin:0;
padding:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background:#0f172a;
}

/* контейнер */
.app{
max-width:430px;
margin:auto;
min-height:100vh;
padding:30px 22px;
background:linear-gradient(180deg,#ffffff,#f8fafc);
border-radius:35px;
animation:fadeIn 0.6s ease;
}

/* плавное появление */
@keyframes fadeIn{
from{opacity:0; transform:translateY(20px)}
to{opacity:1; transform:translateY(0)}
}

.title{
text-align:center;
font-weight:600;
font-size:18px;
letter-spacing:2px;
color:#334155;
margin-bottom:30px;
}

.balance{
text-align:center;
font-size:48px;
font-weight:700;
margin-bottom:30px;
transition:0.3s;
}

.positive{color:#16a34a}
.negative{color:#dc2626}

/* карточки доход/расход */
.summary{
display:flex;
gap:12px;
margin-bottom:30px;
}

.card{
flex:1;
padding:18px;
border-radius:24px;
text-align:center;
font-size:14px;
font-weight:600;
transition:0.3s;
}

.incomeCard{
background:rgba(22,163,74,0.08);
color:#16a34a;
}

.expenseCard{
background:rgba(220,38,38,0.08);
color:#dc2626;
}

/* переключатель */
.switch{
display:flex;
background:#eef2f7;
border-radius:25px;
padding:4px;
margin-bottom:18px;
position:relative;
}

.switch button{
flex:1;
padding:12px;
border:none;
background:transparent;
font-weight:600;
font-size:14px;
z-index:2;
}

.slider{
position:absolute;
top:4px;
bottom:4px;
width:50%;
border-radius:22px;
background:#111827;
transition:0.3s;
}

.slider.right{
left:50%;
}

.slider.left{
left:0%;
}

/* поля */
input{
width:100%;
padding:16px;
border-radius:25px;
border:none;
background:#eef2f7;
font-size:15px;
outline:none;
margin-bottom:15px;
transition:0.2s;
}

input:focus{
background:#e2e8f0;
}

/* кнопки */
button.main{
width:100%;
padding:16px;
border-radius:28px;
border:none;
background:#111827;
color:white;
font-weight:600;
font-size:15px;
margin-bottom:12px;
transition:0.25s;
}

button.main:active{
transform:scale(0.96);
}

button.secondary{
background:#94a3b8;
}

/* история */
.history{
margin-top:20px;
}

.item{
display:flex;
justify-content:space-between;
padding:16px 0;
border-bottom:1px solid #e2e8f0;
font-size:15px;
animation:itemFade 0.3s ease;
}

@keyframes itemFade{
from{opacity:0; transform:translateX(-10px)}
to{opacity:1; transform:translateX(0)}
}

.income{color:#16a34a;font-weight:600}
.expense{color:#dc2626;font-weight:600}

.delete{
margin-left:10px;
color:#cbd5e1;
cursor:pointer;
transition:0.2s;
}

.delete:active{
color:#ef4444;
}
</style>
</head>
<body>

<div class="app" onclick="hideKeyboard(event)">

<div class="title">FINANCE X</div>

<div class="balance" id="balance">0 грн</div>

<div class="summary">
<div class="card incomeCard">Доходи<br><span id="incomeTotal">0</span> грн</div>
<div class="card expenseCard">Витрати<br><span id="expenseTotal">0</span> грн</div>
</div>

<div class="switch">
<div id="slider" class="slider left"></div>
<button onclick="setType('income')">Дохід</button>
<button onclick="setType('expense')">Витрата</button>
</div>

<input type="number" id="amount" placeholder="Сума">
<input type="text" id="category" placeholder="Категорія">

<button class="main" onclick="add()">Додати</button>
<button class="main secondary" onclick="exportData()">Експорт</button>
<button class="main secondary" onclick="document.getElementById('importFile').click()">Імпорт</button>

<input type="file" id="importFile" style="display:none" accept=".json" onchange="importData(event)">

<div class="history" id="list"></div>

</div>

<script>

let data=JSON.parse(localStorage.getItem("financeApp"))||[];
let currentType="income";

function hideKeyboard(e){
if(e.target.tagName!=="INPUT"){
document.activeElement.blur();
}
}

function setType(type){
currentType=type;
let slider=document.getElementById("slider");
slider.className="slider "+(type==="income"?"left":"right");
}

function save(){
localStorage.setItem("financeApp",JSON.stringify(data));
}

function render(){
let incomeTotal=0;
let expenseTotal=0;
let list=document.getElementById("list");
list.innerHTML="";

data.forEach((item,index)=>{
if(item.type==="income")incomeTotal+=item.amount;
else expenseTotal+=item.amount;

let div=document.createElement("div");
div.className="item";
div.innerHTML=`
<span>${item.category}</span>
<span class="${item.type}">
${item.type==="income"?"+ ":"- "}${item.amount.toFixed(2)} грн
<span class="delete" onclick="remove(${index})">✕</span>
</span>
`;
list.appendChild(div);
});

let balance=incomeTotal-expenseTotal;
document.getElementById("incomeTotal").innerText=incomeTotal.toFixed(2);
document.getElementById("expenseTotal").innerText=expenseTotal.toFixed(2);

let balanceEl=document.getElementById("balance");
balanceEl.innerText=balance.toFixed(2)+" грн";
balanceEl.className="balance "+(balance>=0?"positive":"negative");
}

function add(){
let amount=parseFloat(document.getElementById("amount").value);
let category=document.getElementById("category").value;
if(!amount||!category)return;

data.unshift({type:currentType,amount,category});
save();
render();
document.getElementById("amount").value="";
document.getElementById("category").value="";
}

function remove(index){
data.splice(index,1);
save();
render();
}

function exportData(){
if(data.length===0){alert("Немає даних");return;}
const blob=new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
const url=URL.createObjectURL(blob);
const a=document.createElement("a");
a.href=url;
a.download="finance-backup.json";
a.click();
URL.revokeObjectURL(url);
}

function importData(event){
const file=event.target.files[0];
if(!file)return;
const reader=new FileReader();
reader.onload=function(e){
try{
const imported=JSON.parse(e.target.result);
if(!Array.isArray(imported))return;
data=[...imported,...data];
save();
render();
alert("Імпорт успішний");
}catch{
alert("Помилка імпорту");
}
};
reader.readAsText(file);
}

render();

</script>
</body>
</html>
